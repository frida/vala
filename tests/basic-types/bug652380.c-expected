/* basic_types_bug652380.c generated by valac, the Vala compiler
 * generated from basic_types_bug652380.vala, do not modify */

#include <glib.h>
#include <string.h>

static void _vala_main (void);
static gint* _vala_array_dup1 (gint* self,
                        gssize length);
static inline gpointer _vala_memdup2 (gconstpointer mem,
                        gsize byte_size);

static gint*
_vala_array_dup1 (gint* self,
                  gssize length)
{
	if (length > 0) {
		return _vala_memdup2 (self, length * sizeof (gint));
	}
	return NULL;
}

static void
_vala_main (void)
{
	gint foo[3] = {0};
	gint* bar = NULL;
	gint* _tmp0_;
	gint _tmp0__length1;
	gint bar_length1;
	gint _bar_size_;
	_tmp0_ = _vala_array_dup1 (foo, 3);
	_tmp0__length1 = 3;
	bar = _tmp0_;
	bar_length1 = _tmp0__length1;
	_bar_size_ = bar_length1;
	bar = (g_free (bar), NULL);
}

int
main (int argc,
      char ** argv)
{
	_vala_main ();
	return 0;
}

static inline gpointer
_vala_memdup2 (gconstpointer mem,
               gsize byte_size)
{
	gpointer new_mem;
	if (mem && byte_size != 0) {
		new_mem = g_malloc (byte_size);
		memcpy (new_mem, mem, byte_size);
	} else {
		new_mem = NULL;
	}
	return new_mem;
}

